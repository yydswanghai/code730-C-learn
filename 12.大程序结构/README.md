## 多个.c文件

* main()里的代码太长了适合分成几个函数
* 一个源代码文件太长了适合分成几个文件
* 两个独立的源代码文件不能编译形成可执行的程序

## 编译单元

* 一个.c文件是一个编译单元
* 编译器每次编译只处理一个编译单元

## 头文件

* 把函数原型放到一个头文件（以.h结尾）中，在需要调用这个函数的源文件代码（.c文件）中#include这个头文件，就能让编译器在编译的时候知道函数的原型

## `#include`

* `#include`是一个编译预处理指令，和宏一样，在编译之前就处理了
* 它把那个文件的全部文本内容原封不动地插入到它所在的地方
* 所以也不是一定要在.c文件的最前面`#include`

## ""还是<>

* `#include`有两种形式来指出要插入的文件
  * ""要求编译器首先在当前目录（.c文件所在的目录）寻找这个文件，如果没有，到编译器指定的目录去找
  * <>让编译器只在指定的目录去找
* 编译器自己知道自己的标准库的头文件在哪里
* 环境变量和编译器命令行参数也可以指定寻找头文件目录

## `#include`误区

* `#include`不是用来引入库的
* stdio.h里只有printf的原型，printf的代码在另外的地方，某个.lib(Windows)或.a(Unix)中
* 现在的C语言编译器默认会引入所有的标准库
* `#include <stdio>只是为了让编译器知道printf函数的原型，保证你调用时给出的参数值是正确的类型`

* 在使用和定义这个函数的地方都应该`#include`这个头文件
* 一般都做法就是任何.c都有对应的同名.h，把所有对外公开的函数的原型和全局变量的声明都放进去

* 在函数前面加上static就使得它成为只能在所在的编译单元中被使用的函数
* 在全局变量前面加上static就使得它成为只能在所在的编译单元中被使用的全局变量

## 变量的声明

* `int i;`是变量的定义
* `extern int i;`是变量的声明

## 声明和定义

* 声明是不产生代码的东西
  * 函数原型
  * 变量声明
  * 结构声明
  * 宏声明
  * 枚举声明
  * 类型声明
  * inline函数
* 定义是产生代码的东西

对于头文件
* 只有声明可以被放在头文件中
* 否则会造成一个项目中多个编译单元里有重名的实体
  * *某些编译器允许几个编译单元中存在同名的函数，或者用weak修饰符来强调这种存在

## 重复声明

* 同一个编译单元里，同名的结构不能被重复声明
* 如果你的头文件里有结构的声明，很难这个头文件不会在一个编译单元里被`#include`多次
* 所以需要“标准头文件结构”

防止头文件被重复包含，避免编译错误。通常使用 #ifndef, #define, 和 #endif 来实现。例如：

```c
#ifndef MY_HEADER_H
#define MY_HEADER_H

// 头文件内容

#endif
```